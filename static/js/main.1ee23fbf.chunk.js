(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{135:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(17),l=t.n(c),o=t(21),i=t(18),s=t(69),u=t(27),m=t.n(u),d=t(39),E=t.n(d),h=t(8),b=t(74),p=t.n(b),f=t(16),v=t.n(f),g=function(e){var a=e.title,t=e.children;return r.a.createElement("div",{className:"my-3 p-3 bg-white rounded shadow-sm"},a?r.a.createElement("h6",{className:"pb-2"},a):null,t)},C=t(29),k=t.n(C),j=function(e){var a=e.changes,t=e.onClick,n={professor:"Profesor",room:"Curso",schedule:"Horario",name:"Nombre",credits:"Cr\xe9ditos"},c=function(e){t&&t(e)};return r.a.createElement(k.a,{responsive:!0,hover:t,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"C\xf3digo"),r.a.createElement("th",null,"Secci\xf3n"),r.a.createElement("th",null,"Cambio"),r.a.createElement("th",null,"Fecha"))),r.a.createElement("tbody",null,a.map(function(e,a){return r.a.createElement("tr",{key:a,onClick:function(){return c(e)},style:t?{cursor:"pointer"}:null},r.a.createElement("td",null,e.code),r.a.createElement("td",null,e.section),r.a.createElement("td",null,"CREATE"===(l=e).type?"Secci\xf3n agregada":"DELETE"===l.type?"Secci\xf3n eliminada":"UPDATE"===l.type?"".concat(n[l.field],": ").concat(l.oldValue," => ").concat(l.newValue):void 0),r.a.createElement("td",null,e.date));var l})))},O=t(38),w=t.n(O),y=t(72),S=t(26),T=t(30),x=t(24),D=t.n(x),N=t(6),P=t.n(N),A=t(23),U=t.n(A),R=t(73),q=t.n(R),L=function(e){var a=e.show,t=e.handleClose,c=e.defaultCode,l=Object(n.useState)(!1),o=Object(h.a)(l,2),i=o[0],s=o[1],u=Object(n.useState)(!1),m=Object(h.a)(u,2),d=m[0],E=m[1],b=Object(n.useState)({code:c||"",email:""}),p=Object(h.a)(b,2),f=p[0],g=p[1],C=Object(n.useState)({UPDATE_schedule:!0,UPDATE_room:!0,UPDATE_professor:!0,CREATE:!0,DELETE:!0}),k=Object(h.a)(C,2),j=k[0],O=k[1],x=r.a.createRef(),N=function(e){var a=e.target.name;"checkbox"===e.target.type?O(Object(T.a)({},j,Object(S.a)({},a,e.target.checked))):g(Object(T.a)({},f,Object(S.a)({},a,e.target.value)))},A=function(){return Object.values(j).some(function(e){return!0===e})},R=function(){var e=Object(y.a)(w.a.mark(function e(){var a,n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s(!0),!1!==x.current.checkValidity()){e.next=3;break}return e.abrupt("return");case 3:return a=Object(T.a)({},f,{options:Object.keys(j).filter(function(e){return j[e]})}),E(!0),e.prev=5,e.next=8,fetch("https://intec-oferta.herokuapp.com/v1/subscription",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(a)});case 8:if(200===(n=e.sent).status){e.next=11;break}throw Error();case 11:return e.next=13,n.json();case 13:if((n=e.sent).success){e.next=16;break}throw Error();case 16:t(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),alert("Ocurri\xf3 un error al suscribirse. Por favor intente mas tarde.");case 22:return e.prev=22,E(!1),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[5,19,22,25]])}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(D.a,{show:a,onHide:t},r.a.createElement(D.a.Header,{closeButton:!0},r.a.createElement(D.a.Title,null,"Suscripci\xf3n")),r.a.createElement(D.a.Body,null,r.a.createElement(P.a,{onSubmit:function(e){e.preventDefault(),R()},ref:x,validated:i},r.a.createElement(P.a.Group,{as:P.a.Row},r.a.createElement(P.a.Label,{column:!0,sm:2},"C\xf3digo"),r.a.createElement(U.a,{sm:10},r.a.createElement(P.a.Control,{required:!0,name:"code",value:f.code,onChange:N,type:"text",placeholder:"Ej. CBM206"}),r.a.createElement(P.a.Control.Feedback,{type:"invalid"},"Debe ingresar un c\xf3digo de asignatura."))),r.a.createElement(P.a.Group,{as:P.a.Row},r.a.createElement(P.a.Label,{column:!0,sm:2},"Email"),r.a.createElement(U.a,{sm:10},r.a.createElement(P.a.Control,{name:"email",required:!0,value:f.email,onChange:N,type:"email",placeholder:"Correo electr\xf3nico"}),r.a.createElement(P.a.Control.Feedback,{type:"invalid"},"Debe ingresar un correo electr\xf3nico."))),r.a.createElement(P.a.Group,null,r.a.createElement(P.a.Label,null,"Notificaciones"),i&&!A()?r.a.createElement("div",{class:"text-danger"},"Debe seleccionar al menos un cambio para el cual recibir notificaciones."):null,r.a.createElement(P.a.Row,null,r.a.createElement(U.a,{sm:6},r.a.createElement(P.a.Check,{name:"UPDATE_schedule",required:!A(),checked:j.UPDATE_schedule,onChange:N,label:"Cambio de horario"}),r.a.createElement(P.a.Check,{name:"UPDATE_room",required:!A(),checked:j.UPDATE_room,onChange:N,label:"Cambio de curso"}),r.a.createElement(P.a.Check,{name:"UPDATE_professor",required:!A(),checked:j.UPDATE_professor,onChange:N,label:"Cambio de profesor"})),r.a.createElement(U.a,{sm:6},r.a.createElement(P.a.Check,{name:"CREATE",required:!A(),checked:j.CREATE,onChange:N,label:"Secci\xf3n agregada"}),r.a.createElement(P.a.Check,{name:"DELETE",required:!A(),checked:j.DELETE,onChange:N,label:"Secci\xf3n eliminada"})))))),r.a.createElement(D.a.Footer,null,r.a.createElement(v.a,{variant:"secondary",disabled:d,onClick:t},"Cancelar"),r.a.createElement(v.a,{variant:"primary",disabled:d,onClick:R},d?r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{as:"span",animation:"border",size:"sm",role:"status"})," Suscribiendo..."):"Suscribirse")))},_=function(e,a){var t=Object(n.useState)([]),r=Object(h.a)(t,2),c=r[0],l=r[1];return Object(n.useEffect)(function(){var t="https://intec-oferta.herokuapp.com/v1/diff";e&&(t+="/".concat(e),a&&(t+="/".concat(a))),fetch(t).then(function(e){return e.json()}).then(function(e){e.success?l(e.changes):console.error(e)})},[e,a]),c},B=Object(i.k)(function(e){var a=e.history,t=_(),c=Object(n.useState)(!1),l=Object(h.a)(c,2),o=l[0],i=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{show:o,handleClose:function(){return i(!1)}}),r.a.createElement(p.a,{className:"shadow-sm mt-4 mb-4"},r.a.createElement("h1",null,"Notificador de Cambios"),r.a.createElement("p",null,"Esta herramienta fue desarrollada para proporcionar alertas a los estudiantes cuando cambia algo en relaci\xf3n a materias de la oferta acad\xe9mica. Puede ver los \xfaltimos cambios realizados para una asignatura, o suscribirse para que cualquier cambio le llegue por correo."),r.a.createElement("p",null,r.a.createElement(v.a,{variant:"primary",onClick:function(){return i(!0)}},"Suscribirse"))),r.a.createElement(g,{title:"\xdaltimos cambios"},r.a.createElement(j,{changes:t,onClick:function(e){a.push("/".concat(e.code))}})))}),F=t(75),z=t.n(F),J=function(e){var a=e.match,t=_(a.params.code),c=Object(n.useState)([]),l=Object(h.a)(c,2),o=l[0],i=l[1],s=Object(n.useState)(null),u=Object(h.a)(s,2),m=u[0],d=u[1],E=Object(n.useState)(!1),b=Object(h.a)(E,2),p=b[0],f=b[1];Object(n.useEffect)(function(){fetch("https://intec-oferta.herokuapp.com/v1/offer/"+a.params.code).then(function(e){return e.json()}).then(function(e){if(e.success)if(i(e.sections),e.sections.length>0){var a=e.sections[0];d({code:a.code,credits:a.credits,name:a.name})}else d(null);else console.error(e)})},[a.params.code]);return r.a.createElement("div",{className:"mt-4"},r.a.createElement(L,{defaultCode:a.params.code,show:p,handleClose:function(){return f(!1)}}),r.a.createElement("div",{className:"p-3 my-3 d-md-flex justify-content-between text-white-50 bg-primary rounded shadow-sm"},r.a.createElement("div",{className:"mb-2 mb-md-0"},r.a.createElement("h6",{className:"text-white mb-0"},"Suscr\xedbete"),r.a.createElement("span",null,"Recibe notificaciones al correo cuando ocurra un cambio en esta asignatura.")),r.a.createElement(v.a,{variant:"outline-light",onClick:function(){return f(!0)}},"Suscribirse")),m?r.a.createElement(g,null,r.a.createElement("div",{className:"d-flex justify-content-between pb-3"},r.a.createElement("span",null,r.a.createElement("b",null,m.code)," - ",m.name),r.a.createElement("span",{className:"text-right"},r.a.createElement("b",null,m.credits)," cr\xe9ditos")),r.a.createElement(k.a,{striped:!0,responsive:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Secci\xf3n"),r.a.createElement("th",null,"Curso"),r.a.createElement("th",null,"Profesor"),r.a.createElement("th",null,"Lunes"),r.a.createElement("th",null,"Martes"),r.a.createElement("th",null,"Mi\xe9rcoles"),r.a.createElement("th",null,"Jueves"),r.a.createElement("th",null,"Viernes"),r.a.createElement("th",null,"S\xe1bado"))),r.a.createElement("tbody",null,o.map(function(e,a){return r.a.createElement("tr",{key:e.section},r.a.createElement("td",null,e.section),r.a.createElement("td",null,e.room),r.a.createElement("td",null,e.professor),r.a.createElement("td",null,e.schedule[0]),r.a.createElement("td",null,e.schedule[1]),r.a.createElement("td",null,e.schedule[2]),r.a.createElement("td",null,e.schedule[3]),r.a.createElement("td",null,e.schedule[4]),r.a.createElement("td",null,e.schedule[5]))})))):r.a.createElement(z.a,{variant:"danger"},"Esta asignatura no se encuentra en la oferta acad\xe9mica."),r.a.createElement(g,{title:"\xdaltimos cambios"},r.a.createElement(j,{changes:t})))},V=t(36),G=t.n(V),H=Object(i.k)(function(e){var a=e.history,t=Object(n.useState)(""),c=Object(h.a)(t,2),l=c[0],o=c[1],i=function(){l&&(a.push("/"+l),o(""))};return r.a.createElement(P.a,{inline:!0,onSubmit:function(e){e.preventDefault(),i()}},r.a.createElement(G.a,{value:l,onChange:function(e){o(e.target.value.toUpperCase())},type:"text",placeholder:"C\xf3digo de asignatura",className:"mr-sm-2"}),r.a.createElement(v.a,{variant:"outline-light",onClick:i},"Buscar"))}),M=function(){return r.a.createElement(o.BrowserRouter,null,r.a.createElement(m.a,{bg:"dark",variant:"dark",expand:"md"},r.a.createElement(E.a,null,r.a.createElement(s.LinkContainer,{to:"/"},r.a.createElement(m.a.Brand,null,"Notificador de Cambios")),r.a.createElement(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(m.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement("div",{className:"mr-auto"}),r.a.createElement(H,null)))),r.a.createElement(E.a,null,r.a.createElement(i.g,null,r.a.createElement(i.d,{path:"/",exact:!0,component:B}),r.a.createElement(i.d,{path:"/:code",exact:!0,component:J}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(134);l.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},76:function(e,a,t){e.exports=t(135)}},[[76,1,2]]]);
//# sourceMappingURL=main.1ee23fbf.chunk.js.map